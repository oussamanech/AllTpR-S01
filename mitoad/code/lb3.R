library(dplyr)
library(tidyr)
library(ggplot2)
library(maps)

#???????????????? ?? ?????????????? ?????????????? plot() ???????????????????? ????????????:
#?????????????????? ?????? ?? ?????????? Plots
#?????????????????????? ?????????????????? ???????????????????????????? ???????????????????????? x.norm ???? 200
#???????????????????? ???? ?????????????? ?????????????????? 0 ?? ?????????????????????? ?????????????????????? 10.
x <- rnorm(n = 200, mean = 0, sd  = 10)

png(file = "Plots/lr4_2.png", bg = "transparent")
plot(x)
hist(x)
hist(x,breaks = 15)
dev.off()
#?????????????????? dataset mpg ???? ???????????? ggplot2. ???????????????????????? ?? ??????????????????????.
ggplot(data = mpg)
?mpg

#1. ?????????????????? ?????????????????? ?????????????????? hwy ???? cyl.
ggplot(mpg, aes(x=cyl, y=hwy )) + geom_point()
#?????????????????? ?????????? ???? ?????????????????? ?? ???????????????????? position = "jitter", ?????????????????????????????? ??????????????.
ggplot(mpg, aes(x=cyl, y=hwy )) + geom_point(position='jitter',)
## ?????????????? position
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, color = "blue"))
#?????????? ???? ??????????, ???????????? ?????? «blue» ???????????????????????????????? ?????? ???????????? (`c (« blue »)`) 
#?????? ?????????????????????? ???? ????????????????, ?????????? ?????? ????, ?????? hwy ?????? displ. 
#?????????? ?????????????? ???????????????????????????? ????????, ?????????????????????????? ?????????? ???????????????????? ???? ?????????????????? aes.
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy), colour = "blue")

#3. ???????????????????? ?????????? ?????????????????? color, size, ?? shape ???????????????????? ???????????????????????????? ??
#???????????????????????? ????????????????????. ????????????????, ?????? aesthetics ?????????? ???????? ?? ???????????? ????????????.
#--------------------
#shape: ???? ?????????? ?????????????????? ?????????????????????? ????????????????????, ???????????? ?????? ?????????? ???? ??????????????????????.
#size: ???????????????????? ???????????????????? ?? ?????????????? ??????????` scale_radius` ?????????? ???????????????????????????? ?????? ?????????????????????????? ?? ????????????????.
#colour: ???????????????????????? ???????????????????? ?? ?????????????????????????? ?????????? ?????????? ??????????.
#???????????? ?????????????????????????? ?????????? ???????? ???????????????????? ?? ?????????????? `scale_color_continuous`

#4. ?????? ??????????, ???????? ???????????????????? ?????????? ?????????????????? ???????????????????? aesthetics ???????? ?? ???? ???? ?????????????????????
#???? ???????????? ?????? ?????????????? ?????????????????????? ???????????????????? ?? ?????????????????????? ????????????????????. ????????????????, ?????????????????????????? ?????????? ?? ?????????? 
#?????? ?????????? ???????????????????? ???????????????????? ????????????????, ?????? ?????? ???????????? ????-???????????????? ?????????? ???????????????? ?? ??????????-?????????? ????????????.

#5. ?????? ???????? ?????????????????????????? stroke aesthetic?
# stroke ?????????????????? ?????????????? ?????????????? ?????? ??????????, ?? ?????????????? ?????? ????????.

#6. ?????? ??????????, ???????? ???????????????????? ?????????? aesthetic ???? ????????????????????, ??, ????????????????, aes(colour = displ < 5)?
#???????????????????????? ?????????????????????????? ???????????????????????????? ?????? ??????????????????, ?????????????? ???????????? ?????????????????????? ?? ?????????????????? ?????????????????? `data`
#,?????????????? ???? ?????????? ?????????????????? ?????????????????? ?? ?????????????? ???????????? ????????????????????.
ggplot(data = mpg) + geom_point(aes(x = cty, y = hwy, colour = displ < 5))

#7. ?????? ????????????????????, ???????? ?????????????????? facet ???? ???????????????????????????? ?????????????????????
## ???? ???????????????? ???????? ???????????? ?????? ?????????????? ?????? ?????????????? ?????????????????????? ???????????????? ????????????????????.
## ?????? ?????????? ???????? ?????????? ?????????????????? ?????? ????????????????????, ?????????????? ?????????????????? ?????????? ????????????????.

#8. ?????????? ???????????????? ???????????? . (??????????) ?????? ?????????????????? ?????????????????
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy)) + facet_grid(drv ~ .)
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy)) + facet_grid(. ~ cyl)
##`.` - ?????? ???????????? ??????????????????????, ?????????????? ???? ?????????? ?????????? ?????????? ???????????? ?? ?????????? ??????????????????.
##?????? ????????????????????, ???????????? ?????? ???????????? ?????????????????????????? ?????????????? ?????????? ???????????????? ????????????????.

#9. ?????? ???????? ???????????????????????? ???????????????? se ?? geom_smooth()?
##`se` ??????????????????, ?????????????? ???? ?????????????????? ???????????????????????????? ??????, ???????????????????????? ?????????????????????????? ????????????????.

#10. ???????????????? ?????? ?????? ???????????????? ?????????????????? ????????????????:
#11. ?????? ???????? ???????????????????????? geom_col(), ?????? ???? ???????????????????? ???? geom_bar()?
##geom_col ?????????????????? ???????????? ?????? ????????. `geom_bar ()` ?????????????? ?????? ???????????????????? (count ?? prop), 
##?? ?????????? ???????????????????? ???????????? ???????????????? ???? ?????? y.
##?? ?????????????? geom_col ???? ???????????? ?????????????????? ???????????? ???????????????? ?????????? ???????????????????? x ???????????????????????? ?????????? ???????????????????? y.

#12. ?????? ?????????? ???????????????? ?????????????????? ?????????????
ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) + geom_point()
#->  ?????????????????? position_jitter, ?????????? ?????????? ?????????????????????? ?? ???????????????? ??????????.
ggplot(data = mpg, mapping = aes(x = cty, y = hwy))+ geom_point(position = 'jitter', alpha=0.5) + geom_smooth(method='lm')

#13. ???????????????????????? stacked bar chart ?? ???????????????? ?????????????????? ?? ?????????????? coord_polar().
ggplot(mpg, aes(x = 1, fill=factor(drv))) + 
  geom_bar(width=1, stat='count') 
## v2 ?? ?????????????? coord_polar()
ggplot(mpg, aes(x = 1, fill=factor(drv))) + 
  geom_bar(width=1, stat='count') +
  coord_polar(theta='y')

#14. ?? ?????? ?????????????? ?????????? coord_quickmap() ?? coord_map()?
##->coord_quickmap(): ???????????????????? ?????????????????????? ?? ???????????????? ??????????????????,
##->?? ???? ?????????? ?????? "coord_map()"  ?????????? ???????????????????????? ?????????????????? ???????????????? ???? ???????????? `mapproj`.
##->?????? ????????????????, ?????? «coord_quickmap()» ???????????????? ?????????????? ?? ???? ?????????????? ???????????????????????????? ??????????????,
##->???? ???? ?????? ?????????? ?? ???? ?????????? ???????????????? ?????????? ???? ????????????????.


#15. ?????????? ???????????? ?????????? ?????????????? ???? ???????????????????? ?????????????? ?? ?????????????????????????????? ?????????????????????? ?????????????? ???? ???????????? ?? ?? ????????????? 
#???????????? ???????????????? coord_fixed() ??????????? 
#?????? ???????? ???????????????????????? geom_abline()?
ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) + geom_point() + geom_abline() + coord_fixed()
####----------->
#geom_abline() ???????????????????????? ?????? ???????????????????? ??????????, ???????????????????????? ?????????????????????? ?????????????? (a) ?? ?????????????????????? (b).
#?????? ?????????????????????????? ?????? ????????????????????, ?????? ??????????, ???? ?????????? ?????????????? ?????????? ?? ???????????????? 1 ?? ???????????? ?????????????????????? 0,
#?????????? ??????????????, ?????????????? ?????????? ???????????? ?????????????????? ?????? ?????????? 45 ????????????????.
####----------->
#coord_fixed(): ??????????, ???????????? ?????? x ?? y ?????????? ???????????????????? ?????????????? ??????????????????,
# ?????????????? ???? ?????????? ?????????????????? ???????????? ?????????? ?? ??????????????, ?????? ???????????? ???? ???????????? ????????, ?????? ???? ??????????,
# ???? ?????? ?????????? ??????????, ?????? ?????????? ?????????????????? ???????????????????? ??????????????????,?????? ?????????????????????????????????? ??????????????????????????.

###################################################### fin #################################################
